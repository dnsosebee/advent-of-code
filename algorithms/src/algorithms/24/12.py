data = """...#........................................#........#.................#............#.#.......................#...............#..#
...#........#.....#..................................................................................#......#..#..................
.................#.......................#.#........#......#...........................................#...#..........#...........
..................#..................#...#.....................................#........#.........................................
...#.....#.......#..............#.#....##.............#....##......................................#...................#..........
...#..........................................................................................................................#...
..#..#.............#.....#...............#.......#..............................................#....#............................
......................#..#...............#...................#....#..........................#...#............#...#....##.........
..#.#.........#................#............#............#.#.......#................#....#..#.....................................
.......................................................................#.....................................#...........#........
...........#.....................................................................#.................................#......#.......
...#.........#....................................................#..............#.............#..........#.......................
.................................................................................................#................................
..................................#.#.#...#.......#.............#.......................#..#.......................#.#............
.......................#.........................................#..........#...#.....#....................................#......
.......#.......#.#...........#......................#.....#..#...#.#...............#.............................#...#............
............##...#......#.........#......#............................................................#.........#..............#..
..#........................................#........##..#...............................................................#.........
...........#..............##................................................................................#.....................
..#................................................................................#..............#...............................
...................................##..............#..........................#.......#..#...............#........#...............
....#............#.........................#................................................................#........#............
............#.....................................................................#.............................................#.
............#..........#.......#...........#.#......#..............#.........#.......................................#......#.....
..#...............................................#..................................#.............................#.............#
.........................................................................#........#................#......#.......#....#........#.
.......................................................................#.....##.................................................#.
..............#.............#...........................#...#..#....................................................#.............
.......#..........................#.......................###..................................#.....................#..#.........
................#.................#.............#......................................................................#........#.
.#.....#................#......................................................................#................#.................
................................#........................#........#..#........................#...................................
..............................................................................................#.....................#.........#...
..................#.................#.........................#.....#................#............................................
......#...................#...#...................#..................#...........................#......###...................#...
.............................##.....#..............#..............................................................#....#..........
......#..................#....................................................###....................#..............#.............
............#...#..................#........#.............#..............................#.........#..........................#...
....#...............................#......#......#...............#.#......#............#...................................#.....
.......#...................................#.#.#.........................................................#..................#.....
.....................#.......#.#......#.#.....................#...................................................................
......#.....#............................................................................#............#.......#..#................
..........#.#......#...................................#....#.#............##.....................................................
...............#........................#..................................#...........#...................................#......
.#....................................................#.......................................................................#...
......#.........................................#...#.........................................#........#..........................
.........................................#..........#.............................................................................
...................#.....................................#.....................#..#............#....#........................##...
.................................#.........#.............#.............................#...........................#...#..........
..#................................................................#.....#....#.................................#.................
........#................#............#.#..........................................#..............................................
..#...........##.....................#..#..........................#...#...#....#.................................................
................................................................................#.................................................
............#...........#.........#....#.........................................................................#................
.............................#...........................................#...............##...................................#...
......................#..............#...#........................#........................................#......................
............#..............#...#.....#.....#..........#...........................#........#...............#......................
..................#............................#....#................................................................#............
..#........................#.............................#......#...............#....#...........#................................
.................................................#................................................#..................#........#...
.#......#.........................................................#...........#...#.......................#.......................
..........................................#.......##........#................................................#..##............##..
..............#...#....................................................................#........#...........................#.....
................#....................................................................#........................................###.
....#............................................#........................#.................#........#.....#...#.....#.#....#.....
...##..........#..................................................................................................................
#....#.........#....................#.#.........................#..........##.......#....#..#....................#................
........#.........#..........#.................#..................#................................#.......#................#...#.
.#..........................................#..#..#......#................................#.#.#..#................................
....#.......#.........#............................................................#....#.........................................
.....................................................................#...#......................#.................................
............#.....#.....#..........#...............................................................................#..............
.........................#...#.#.......#....................................................................#.................#...
......................................................#.#..........................#...#................#.........................
.....#.........#.........#..............................................................#...................#.#......#............
.......................................#......#.......................#.................................................#.....#...
.....#....#.......................................................................................................................
#..........#....#....................................#.............#...............#...................#..........#...............
..#....................................##.....................................#...............................#...................
....#..................................#........................#.................................................................
....#................................................................................................#...................#........
....#................................................................................#............................................
..........#.....#...................#.......................#......#..............................................................
#...................#..........#............................................................#............#..............#.........
...#...#....#................................#............................#.##.....................................#..............
..........#.........#.....#...........#............................#...............#.#....#................#....................##
.....#...................................................#........................................................................
............##....................................#..................#.#..#.....................#.........#....##......#...#......
...........#.......#....................#.......................#..#.................#.......#.........#..........................
#.....................#..#..............................................................................................#.........
....#....#..............#............##....................................................^.................#..............#.....
.........#......................................................#..............#............#...#......#....#.....................
.......##...................#...........#.........#.......................................#..........................#............
.#........#.#........................#...........#............#..#........#........#.............#................................
..................##........##.................................................................................#................#.
...#...................#.....#...........#.........#..#............#..................................#.....#.....................
.................#.........#..........#............#......#.........................#.............#.......#......................#
.................................................................#...............#.....#.#....#...................................
..........................#...........................................................................................#..#........
..............#.................................................................................##......................#.........
....#...#....................#...............................................#................#............#......................
........................................................................#........#................................................
....#.....#......................#.......#............#......................................#..................................#.
................#................................#.#.............#.#.........#..............................................#.....
..............#..................#...#...........................................................................#................
...#..........#....................................................#...............................#...........#.......#..........
...................................#....................#..#.#........#..#.......................#...#.....#......................
.......#.....#.#.......#....#............#...............#..........#.................#........#.#................................
.....#....#.........#........#.......#............................................................................................
..#........#......#............................................................#..........#...............................#.......
..#..#...................................#....................#...#.#................#......................#.....................
....................................#......#.....................#...........#.....................#........#.....................
.#..................#.........................................................................................................#...
..............#...........#.#....#..#......#..#.#...#.#.........................................................................#.
...#............##.......................................................#.......................#..#.............................
......#........#..........#..#.#........#.....................#...................................................................
...#...........#.........................................#............#.............#....#.....................................#..
...........#.....................#......................................................................................#.........
.......#..............#...............#............#..........................#............................#........##............
.............#..........#..............................................#................#..............................#..........
...............#..............................#.................#.....#................#....#.....................................
............#.................#..........#........#............#..#......#.......................#....#...#.#...#.#...............
.......#.#...................................##..............#.....#.....................#.................................##.....
..#..#...#...#....#.............#..#.....................................................................................#........
......#......................#...#...#..........#......................................#.................#....#.................#.
.......#...........#...........#...................#..............................#.......................................#.......
......#.......................................#...............................................#.........#........#....#.........##
......#.................................................................#...#............#..........#.............................
.....................................#..........#.........#.....#.............#...........#.......................................
.#.....................................#......................#.....#..#.........................................................."""

d2 = """....#.....
....^....#
..........
..#.......
.......#..
..........
.#........
........#.
#.........
......#..."""
from collections import defaultdict

lines = data.splitlines()
h, w = len(lines), len(lines[0])
for i in range(h):
  for j in range(w):
    if lines[i][j] == "^":
      start = i * w + j

res = 0
ds = [[-1,0],[0,1],[1,0],[0,-1]]

def move(pos, dir):
  di = ds[dir]
  new_x = pos // w + di[0]
  new_y = pos % w + di[1]
  if not (0 <= new_x < h and 0 <= new_y < w):
    return False
  return pos + di[0] * w + di[1]

def get(pos):
  return lines[pos // w][pos % w]

def set(pos, v):
  curr = lines[pos // w]
  lines[pos // w] = curr[:pos % w] + v + curr[(pos % w) + 1:]

def pp(pos):
  print(pos // w, pos % w)

def detect_cycle(grid):
  pos = start
  d = 0
  ps = defaultdict(list)
  while True:
    fwd = move(pos, d)
    if fwd is not False:
      if d in ps[pos]:
        return True
      ps[pos].append(d)
      if get(fwd) == "#":
        d = (d + 1) % 4
      else:
        pos = fwd
    else:
      break
  return False

for i in range(w * h):
  v = get(i)
  if v == ".":
    set(i, "#")
    if detect_cycle(lines):
      res += 1
    set(i, v)

print(res)